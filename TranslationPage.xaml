<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AI_Translator_Mobile_App.TranslationPage"
             BackgroundColor="{StaticResource PageBackgroundColor}">
    <Grid RowDefinitions="Auto, Auto, Auto, Auto, *" RowSpacing="10" Padding="15">

        <!-- Mode Selector -->
        <Frame Grid.Row="0" CornerRadius="10" Padding="5" BackgroundColor="{StaticResource FrameBackgroundColor}">
            <Grid ColumnDefinitions="*,*,*" ColumnSpacing="5">
                <Button x:Name="TranslateButton" Text="Translate" Clicked="OnModeButtonClicked" Style="{StaticResource SegmentedButton}" />
                <Button x:Name="GrammarCheckButton" Grid.Column="1" Text="Grammar" Clicked="OnModeButtonClicked" Style="{StaticResource SegmentedButton}" />
                <Button x:Name="UsageAnalysisButton" Grid.Column="2" Text="Usage" Clicked="OnModeButtonClicked" Style="{StaticResource SegmentedButton}" />
            </Grid>
        </Frame>

        <!-- Language Picker -->
        <Picker x:Name="LanguagePicker" Grid.Row="1" Title="Translate to:" SelectedIndexChanged="OnLanguagePickerChanged">
            <Picker.ItemsSource>
                <x:Array Type="{x:Type x:String}">
                    <x:String>English</x:String>
                    <x:String>French</x:String>
                    <x:String>Turkish</x:String>
                </x:Array>
            </Picker.ItemsSource>
        </Picker>

        <!-- User Input -->
        <Frame Grid.Row="2" CornerRadius="10" Padding="0" BorderColor="{StaticResource AccentDark}">
            <Editor x:Name="InputEntry" Placeholder="Enter text here..." HeightRequest="100" />
        </Frame>

        <!-- Action Button -->
        <Button x:Name="ProcessButton" Grid.Row="3" Text="Go" Clicked="OnProcessClicked" Style="{StaticResource MaterialButton}" />

        <!-- Loading Indicator -->
        <ActivityIndicator x:Name="TranslatorLoadingIndicator" Grid.Row="4" IsRunning="False" IsVisible="False" HorizontalOptions="Center" VerticalOptions="Center" Color="{StaticResource AccentDark}" />

        <!-- Horizontal scrolling container for outputs -->
        <ScrollView Grid.Row="4" Orientation="Horizontal" HorizontalScrollBarVisibility="Always" Margin="0,10,0,0">
            <StackLayout Orientation="Horizontal" Spacing="15">

                <!-- Translation Service 1 (DeepL) -->
                <Frame Style="{StaticResource OutputCard}">
                    <StackLayout>
                        <Label x:Name="Model1Label" Text="DeepL" Style="{StaticResource CardTitle}" />
                        <Editor x:Name="OutputModel1" Style="{StaticResource OutputEditor}" />
                        <StackLayout x:Name="FollowUp1Container" IsVisible="False" Spacing="5">
                            <Entry x:Name="FollowUpInput1" Placeholder="Ask follow-up question..." />
                            <Button Text="Send" Clicked="OnFollowUpClicked" CommandParameter="1" />
                        </StackLayout>
                    </StackLayout>
                </Frame>

                <!-- Translation Service 2 (Google) -->
                <Frame Style="{StaticResource OutputCard}">
                    <StackLayout>
                        <Label x:Name="Model2Label" Text="Google Translate" Style="{StaticResource CardTitle}" />
                        <Editor x:Name="OutputModel2" Style="{StaticResource OutputEditor}" />
                        <StackLayout x:Name="FollowUp2Container" IsVisible="False" Spacing="5">
                            <Entry x:Name="FollowUpInput2" Placeholder="Ask follow-up question..." />
                            <Button Text="Send" Clicked="OnFollowUpClicked" CommandParameter="2" />
                        </StackLayout>
                    </StackLayout>
                </Frame>

                <!-- Translation Service 3 (Microsoft) -->
                <Frame Style="{StaticResource OutputCard}">
                    <StackLayout>
                        <Label x:Name="Model3Label" Text="Microsoft Translator" Style="{StaticResource CardTitle}" />
                        <Editor x:Name="OutputModel3" Style="{StaticResource OutputEditor}" />
                        <StackLayout x:Name="FollowUp3Container" IsVisible="False" Spacing="5">
                            <Entry x:Name="FollowUpInput3" Placeholder="Ask follow-up question..." />
                            <Button Text="Send" Clicked="OnFollowUpClicked" CommandParameter="3" />
                        </StackLayout>
                    </StackLayout>
                </Frame>

                <!-- AI Model 1 -->
                <Frame Style="{StaticResource OutputCard}">
                    <StackLayout>
                        <Label x:Name="Model4Label" Text="OpenAI GPT-4o" Style="{StaticResource CardTitle}" />
                        <Editor x:Name="OutputModel4" Style="{StaticResource OutputEditor}" />
                        <StackLayout x:Name="FollowUp4Container" IsVisible="False" Spacing="5">
                            <Entry x:Name="FollowUpInput4" Placeholder="Ask follow-up question..." />
                            <Button Text="Send" Clicked="OnFollowUpClicked" CommandParameter="4" />
                        </StackLayout>
                    </StackLayout>
                </Frame>

                <!-- AI Model 2 -->
                <Frame Style="{StaticResource OutputCard}">
                    <StackLayout>
                        <Label x:Name="Model5Label" Text="Mistral AI" Style="{StaticResource CardTitle}" />
                        <Editor x:Name="OutputModel5" Style="{StaticResource OutputEditor}" />
                        <StackLayout x:Name="FollowUp5Container" IsVisible="False" Spacing="5">
                            <Entry x:Name="FollowUpInput5" Placeholder="Ask follow-up question..." />
                            <Button Text="Send" Clicked="OnFollowUpClicked" CommandParameter="5" />
                        </StackLayout>
                    </StackLayout>
                </Frame>
            </StackLayout>
        </ScrollView>
    </Grid>
</ContentPage>